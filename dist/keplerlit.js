!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.keplerlit=e():t.keplerlit=e()}(this,()=>(()=>{"use strict";var t={97:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ColorMap=e.addColorMap=e.colorMapNames=e.createLut=void 0;var o=i(879);e.createLut=function(t,e,i){void 0===i&&(i=1);for(var o=r[t]||r.Rainbow,s=[],a=0,h=0;h<i;++h)o.forEach(function(t){s.push([a+t[0]/i,t[1]])}),a+=1/i;return new n(s,e)},e.colorMapNames=function(){for(var t=[],e=0,i=Object.entries(r);e<i.length;e++){var o=i[e],n=o[0];o[1],t.push(n)}return t},e.addColorMap=function(t,e){r[t]=e};var n=function(){function t(t,e){this.map=[],this.lut=[],this.n=256,this.minV=0,this.maxV=1,this.setColorMap(t,e)}return t.addColorMap=function(t,e){r[t]=e},Object.defineProperty(t.prototype,"mapColors",{get:function(){return this.map},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvas",{get:function(){return this.canvas_},enumerable:!1,configurable:!0}),t.prototype.set=function(e){return e instanceof t&&this.copy(e),this},Object.defineProperty(t.prototype,"length",{get:function(){return this.map.length},enumerable:!1,configurable:!0}),t.prototype.setMin=function(t){return this.minV=t,this},t.prototype.setMax=function(t){return this.maxV=t,this},t.prototype.setColorMap=function(t,e){Array.isArray(t)?this.map=t:this.map=r[t]||r.Rainbow,this.n=e||32;var i=1/this.n;this.lut=[];for(var n=0;n<=1;n+=i)for(var s=0;s<this.map.length-1;s++)if(n>=this.map[s][0]&&n<this.map[s+1][0]){var a=this.map[s][0],h=this.map[s+1][0],p=new o.Color(this.map[s][1]),u=new o.Color(this.map[s+1][1]),l=p.lerp(u,(n-a)/(h-a));this.lut.push(l)}return this},t.prototype.copy=function(t){return this.lut=t.lut,this.map=t.map,this.n=t.n,this.minV=t.minV,this.maxV=t.maxV,this},t.prototype.getColor=function(t){t<=this.minV?t=this.minV:t>=this.maxV&&(t=this.maxV),t=(t-this.minV)/(this.maxV-this.minV);var e=Math.round(t*this.n);return e===this.n&&(e-=1),this.lut[e]},t.prototype.createCanvas=function(t,e){void 0===t&&(t=document),void 0===e&&(e=1);var i=t.createElement("canvas");return i.width=e,i.height=this.n,this.updateCanvas(i),i},t.prototype.updateCanvas=function(t){this.canvas_=t;for(var e=t.getContext("2d",{alpha:!1}),i=0,n=1/this.n,r=1;r>=0;r-=n)for(var s=this.map.length-1;s>=0;s--)if(r<this.map[s][0]&&r>=this.map[s-1][0]){var a=this.map[s-1][0],h=this.map[s][0],p=new o.Color(this.map[s-1][1]),u=new o.Color(this.map[s][1]),l=p.lerp(u,(r-a)/(h-a));e.fillStyle="rgb(".concat(Math.round(255*l.r),", ").concat(Math.round(255*l.g),", ").concat(Math.round(255*l.b),")"),e.fillRect(0,i,15,1),i+=1}return t},t}();e.ColorMap=n;var r={Cooltowarm:[[0,3952322],[.2,10206463],[.5,14474460],[.8,16163717],[1,11797542]],Blackbody:[[0,0],[.2,7864320],[.5,15086080],[.8,16776960],[1,16777215]],Grayscale:[[0,0],[.2,4210752],[.5,8355712],[.8,12566463],[1,16777215]],Insar:[[0,327893],[.3,47871],[.5,65478],[.7,16580352],[1,13631488]],InsarBanded:[[0,327893],[.02040816326530612,47871],[.04081632653061224,65478],[.061224489795918366,16580352],[.08163265306122448,13631488],[.1020408163265306,327893],[.12244897959183673,47871],[.14285714285714285,65478],[.16326530612244897,16580352],[.18367346938775508,13631488],[.2040816326530612,327893],[.22448979591836732,47871],[.24489795918367346,65478],[.26530612244897955,16580352],[.2857142857142857,13631488],[.3061224489795918,327893],[.32653061224489793,47871],[.3469387755102041,65478],[.36734693877551017,16580352],[.3877551020408163,13631488],[.4081632653061224,327893],[.42857142857142855,47871],[.44897959183673464,65478],[.4693877551020408,16580352],[.4897959183673469,13631488],[.5102040816326531,327893],[.5306122448979591,47871],[.5510204081632653,65478],[.5714285714285714,16580352],[.5918367346938775,13631488],[.6122448979591836,327893],[.6326530612244897,47871],[.6530612244897959,65478],[.673469387755102,16580352],[.6938775510204082,13631488],[.7142857142857142,327893],[.7346938775510203,47871],[.7551020408163265,65478],[.7755102040816326,16580352],[.7959183673469387,13631488],[.8163265306122448,327893],[.836734693877551,47871],[.8571428571428571,65478],[.8775510204081632,16580352],[.8979591836734693,13631488],[.9183673469387754,327893],[.9387755102040816,47871],[.9591836734693877,65478],[.9795918367346939,16580352],[.9999999999999999,13631488]],Rainbow:[[0,16711680],[.2,16776192],[.4,65286],[.6,65532],[.8,393471],[1,16122111]],Igeoss:[[0,13863],[.1,35387],[.2,6864397],[.3,14081792],[.4,16437248],[.5,16760848],[.6,16756238],[.7,16751366],[.8,16406528],[.9,15204360],[1,8912899]],Stress:[[0,255],[.33,16777215],[.331,51200],[.66,16777215],[.661,16711680],[1,16777215]],Blue_White_Red:[[0,4863],[.5,16777215],[1,16711680]],Blue_Green_Red:[[0,4863],[.25,16777215],[.5,65280],[.275,16777215],[1,16711680]],Spectrum:[[0,16777215],[.1428,16711680],[.2856,16711932],[.4284,393471],[.5712,63231],[.714,65286],[.8568,16776192],[1,16711680]],Default:[[0,786687],[.25,64767],[.5,65292],[.75,16187136],[1,16711680]],Banded:[[0,16774605],[.1666,16750080],[.1667,13565905],[.3333,1077504],[.3334,13952251],[.5,90031],[.5001,15458043],[.6666,12911262],[.6667,16773323],[.8333,8674560],[.8334,16373976],[1,14286848]]}},156:function(t,e,i){var o=this&&this.__createBinding||(Object.create?function(t,e,i,o){void 0===o&&(o=i);var n=Object.getOwnPropertyDescriptor(e,i);n&&!("get"in n?!e.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,o,n)}:function(t,e,i,o){void 0===o&&(o=i),t[o]=e[i]}),n=this&&this.__exportStar||function(t,e){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(e,i)||o(e,t,i)};Object.defineProperty(e,"__esModule",{value:!0}),n(i(879),e),n(i(97),e),n(i(185),e),n(i(906),e),n(i(487),e),n(i(859),e),n(i(797),e)},185:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.fromValuesToColors=e.fromValueToColor=e.scale=e.normalize=e.min=e.max=e.minMax=e.lerp=void 0;var o=i(97);function n(t){for(var e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,o=t.length,n=0;n<o;++n){var r=t[n];r<e&&(e=r),r>i&&(i=r)}return[e,i]}e.lerp=function(t,e,i){if(t<0||t>1)throw new Error("t must be clamped to the range [0,1]. Got ".concat(t));return(1-t)*e+t*i},e.minMax=n,e.max=function(t){for(var e=Number.NEGATIVE_INFINITY,i=t.length,o=0;o<i;++o){var n=t[o];n>e&&(e=n)}return e},e.min=function(t){for(var e=Number.POSITIVE_INFINITY,i=t.length,o=0;o<i;++o){var n=t[o];n<e&&(e=n)}return e},e.normalize=function(t){var e=n(t);return t.map(function(t){return(t-e[0])/(e[1]-e[0])})},e.scale=function(t,e){return t.map(function(t){return t*e})},e.fromValueToColor=function(t,e){var i=e.min,o=void 0===i?0:i,n=e.max,r=void 0===n?1:n,s=e.lutTable,a=e.defaultColor,h=e.reverse,p=void 0!==h&&h;if(t<0||t>1)throw new Error("value *must% be normalized. Got ".concat(t));var u=p?1-t:t;if(u>=o&&u<=r){var l=s.getColor(u);return[l.r,l.g,l.b]}return[a.r,a.g,a.b]},e.fromValuesToColors=function(t,e){var i=e.defaultColor,r=e.lut,s=e.duplicateLut,a=void 0===s?1:s,h=e.min,p=void 0===h?0:h,u=e.max,l=void 0===u?1:u,c=e.lockLut,f=void 0===c||c,v=e.reverse,d=void 0!==v&&v,m=r instanceof o.ColorMap?r:(0,o.createLut)(r,32,a),g=n(t),y=g[0],x=g[1];f?m.setMin(0).setMax(1):m.setMin(p).setMax(l);var _=new Array(3*t.length).fill(0);return t.forEach(function(t,e){var o=d?(t-x)/(y-x):(t-y)/(x-y);if(o>=p&&o<=l){var n=m.getColor(o);_[3*e]=n.r,_[3*e+1]=n.g,_[3*e+2]=n.b}else _[3*e]=i.r,_[3*e+1]=i.g,_[3*e+2]=i.b}),_}},487:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createIsoContourLines=void 0;var o=i(879),n=i(97),r=i(747),s=i(185);e.createIsoContourLines=function(t,e,i,a,h){var p=this;if(void 0===t)throw new Error("mesh is undefined");if(void 0===t.getPositions())throw new Error("mesh.positions is undefined");if(void 0===t.getIndices())throw new Error("mesh.indices is undefined");if(void 0===e)throw new Error("attribute is undefined");var u=(0,s.minMax)(e),l=u[0],c=u[1],f=void 0;null==h&&((f=(0,n.createLut)(h,128)).setMin(l),f.setMax(c));var v=new o.Color(a),d=i,m=new r.MarchingTriangles;m.setup(t.getIndices(),[l,c]);for(var g=t.getPositions(),y=[],x=[],_=function(t){return(t-p.vmin_)/(p.vmax_-p.vmin_)},b=0;b<d.length;++b){var C=m.isolines(e,d[b]),w=(0,s.fromValueToColor)(_(d[b]),{min:l,max:c,defaultColor:v,lutTable:f});x.push.apply(x,w);for(var M=0;M<C[0].length;++M)for(var S=0;S<C[0][M].length-2;S+=2){var I=C[0][M][S],T=C[0][M][S+1],V=C[1][M][S/2],A=g.get(I),P=g.get(T),z=A[0],E=A[1],O=A[2],j=P[0],k=P[1],N=P[2];y.push(z+V*(j-z),E+V*(k-E),O+V*(N-O))}}return{positions:y,color:x}}},747:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MarchingTriangles=void 0;var o=i(185),n=function(){function t(){this.topo_=[],this.lock_=!1,this.maxVertexIndex_=-1,this._bounds=[]}return t.prototype.setup=function(t,e){this.lock_=!1,this.maxVertexIndex_=-1,this._bounds=e,this.topo_=[];for(var i=0;i<t.array.length;i+=3){var o=t.array[i],n=t.array[i+1],r=t.array[i+2];if(this.topo_.push({i:o,j:n,k:r}),o===n||o===r||n===r)throw new Error("Error in topology while setting up iso-contouring in 'MarchingTriangles.' At index ".concat(i,", got 3 indices (").concat(o,", ").concat(n,", ").concat(r,")"));this.maxVertexIndex_=Math.max(this.maxVertexIndex_,o,n,r)}return this.lock_=!0,!0},t.prototype.isolines=function(t,e){var i=[[]];if(!1===this.lock_)return i;if(t.length<0)return i;void 0===this._bounds&&(this._bounds=(0,o.minMax)(t));for(var n=new Map,h=[],p=[0,0,0],u=new Map(new Map),l=0;l<this.topo_.length;++l){p[0]=this.topo_[l].i,p[1]=this.topo_[l].j,p[2]=this.topo_[l].k;var c=void 0,f=void 0,v=t[p[0]],d=t[p[1]],m=t[p[2]];if(!1!==r(v,d,m,this._bounds[0],this._bounds[1])){c=d>=e?1:0,f=m>=e?1:0;var g=a[v>=e?1:0][c][f];if(g>0&&g<7){n.set(l,g),h[0]=s[g][0],h[1]=s[g][1];for(var y=0;y<2;++y){var x=((j=h[y])+1)%3;j=p[j],x=p[x];var _=Math.min(j,x),b=Math.max(j,x);if(_ in u)u.get(_).get(b).push(l);else{var C=new Map;C.set(b,[l]),u.set(_,C)}}}}}for(;!(n.size<=0);){var w=[],M=[],S=n.keys().next().value,I=n.get(S);if(n.delete(n.keys().next().value),!(I<1||I>6)){p[0]=this.topo_[S].i,p[1]=this.topo_[S].j,p[2]=this.topo_[S].k,h[0]=s[I][0],h[1]=s[I][1];var T=[],V=[];for(y=0;y<2;++y)x=((j=h[y])+1)%3,j=p[j],x=p[x],w.push(j),w.push(x),M.push((e-t[j])/(t[x]-t[j])),_=Math.min(j,x),b=Math.max(j,x),0===y?(T[0]=_,T[1]=b):(V[0]=_,V[1]=b);var A=0,P=0;do{for(var z=S;;){var E=[u.get(V[0]).get(V[1])];if(1===E.length)break;z=E[0]+E[1]-z;var O=n.get(z);if(!(O in n))break;for(I=O.second,n.delete(O),p[0]=this.topo_[z].i,p[1]=this.topo_[z].j,p[2]=this.topo_[z].k,h[0]=s[I][0],h[1]=s[I][1],y=0;y<2;++y){var j;if(x=((j=h[y])+1)%3,j=p[j],x=p[x],_=Math.min(j,x),b=Math.max(j,x),_!==V[0]||b!==V[1]){w.push(j),w.push(x),M.push((e-t[j])/(t[x]-t[j])),V[0]=_,V[1]=b;break}}}if(V[0]===T[0]&&V[1]===T[1]){w.push(w[0]),w.push(w[1]),M.push(M[0]),A=M.length;break}0===P&&(V[0]=T[0],V[1]=T[1],A=M.length),++P}while(P<2);if(A===M.length)i[0].push(w),void 0===i[1]?i[1]=[M]:i[1].push(M);else{for(var k=[],N=[],B=w.length-1;B>=2*A;--B)k.push(w[B]);for(B=M.length-1;B>=A;--B)N.push(1-M[B]);for(B=0;B<2*A;++B)k.push(w[B]);for(B=0;B<A;++B)N.push(M[B]);i[0].push(k),i[1].push(N)}}}return i},t}();function r(t,e,i,o,n){function r(t,e,i){return t>=e&&t<=i}return r(t,o,n)&&r(e,o,n)&&r(i,o,n)}e.MarchingTriangles=n;var s=[[-1,-1],[1,2],[0,1],[2,0],[2,0],[0,1],[1,2],[-1,-1]],a=[[[0,1],[2,3]],[[4,5],[6,7]]]},797:function(t,e){var i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},i.apply(this,arguments)},o=this&&this.__spreadArray||function(t,e,i){if(i||2===arguments.length)for(var o,n=0,r=e.length;n<r;n++)!o&&n in e||(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.ColorScale=void 0;var n=function(){function t(t){if(this.animationId=null,this.isVisible=!0,this.canvas=t.canvas,this.overlayCanvas=document.createElement("canvas"),this.overlayCanvas.width=this.canvas.width,this.overlayCanvas.height=this.canvas.height,this.overlayCanvas.style.position="absolute",this.overlayCanvas.style.top="0",this.overlayCanvas.style.left="0",this.overlayCanvas.style.pointerEvents="none",this.overlayCanvas.style.zIndex="1000",this.canvas.parentElement){var e=this.canvas.parentElement;"static"===getComputedStyle(e).position&&(e.style.position="relative"),e.appendChild(this.overlayCanvas)}else document.body.appendChild(this.overlayCanvas);var o=this.overlayCanvas.getContext("2d");if(!o)throw new Error("Unable to get 2D context from overlay canvas");this.ctx=o,this.options=i({fontSize:11,fontFamily:"Arial, sans-serif",textColor:"#333333",backgroundColor:"rgba(255, 255, 255, 0.95)",borderColor:"#cccccc",borderWidth:1,labelOffset:25,precision:1},t),this.render()}return t.prototype.createGradient=function(){var t,e=this.options,i=e.x,n=e.y,r=e.width,s=e.height,a=e.orientation,h=e.colorStops;t="vertical"===a?this.ctx.createLinearGradient(0,n+s,0,n):this.ctx.createLinearGradient(i,0,i+r,0);for(var p=0,u=o([],h,!0).sort(function(t,e){return t.position-e.position});p<u.length;p++){var l=u[p];t.addColorStop(l.position,l.color)}return t},t.prototype.drawScale=function(){var t=this.options,e=t.x,i=t.y,o=t.width,n=t.height,r=t.backgroundColor,s=t.borderColor,a=t.borderWidth;this.ctx.save(),"transparent"!==r&&(this.ctx.fillStyle=r,this.roundRect(e-1,i-1,o+2,n+2,1),this.ctx.fill());var h=this.createGradient();this.ctx.fillStyle=h,this.roundRect(e,i,o,n,1),this.ctx.fill(),a>0&&(this.ctx.strokeStyle=s,this.ctx.lineWidth=a,this.roundRect(e,i,o,n,1),this.ctx.stroke()),this.drawTickMarks(),this.ctx.restore()},t.prototype.roundRect=function(t,e,i,o,n){this.ctx.beginPath(),this.ctx.moveTo(t+n,e),this.ctx.lineTo(t+i-n,e),this.ctx.quadraticCurveTo(t+i,e,t+i,e+n),this.ctx.lineTo(t+i,e+o-n),this.ctx.quadraticCurveTo(t+i,e+o,t+i-n,e+o),this.ctx.lineTo(t+n,e+o),this.ctx.quadraticCurveTo(t,e+o,t,e+o-n),this.ctx.lineTo(t,e+n),this.ctx.quadraticCurveTo(t,e,t+n,e),this.ctx.closePath()},t.prototype.drawTickMarks=function(){var t=this.options,e=t.x,i=t.y,o=t.width,n=t.height,r=t.orientation,s=t.borderColor;this.ctx.strokeStyle=s,this.ctx.lineWidth=1;for(var a=0;a<=5;a++){var h=a/5;if("vertical"===r){var p=i+n-h*n;this.ctx.beginPath(),this.ctx.moveTo(e+o,p),this.ctx.lineTo(e+o+4,p),this.ctx.stroke()}else{var u=e+h*o;this.ctx.beginPath(),this.ctx.moveTo(u,i+n),this.ctx.lineTo(u,i+n+4),this.ctx.stroke()}}},t.prototype.drawLabels=function(){var t=this.options,e=t.x,i=t.y,o=t.width,n=t.height,r=t.min,s=t.max,a=t.orientation,h=t.fontSize,p=t.fontFamily,u=t.textColor,l=t.labelOffset,c=t.precision,f=t.attributeName;if(this.ctx.save(),this.ctx.fillStyle=u,this.ctx.font="".concat(h,"px ").concat(p),"vertical"===a){this.ctx.save(),this.ctx.translate(e+o+l+2*h,i+n/2),this.ctx.rotate(Math.PI/2),this.ctx.textAlign="center",this.ctx.textBaseline="middle",this.ctx.fillText(f,0,0),this.ctx.restore(),this.ctx.textAlign="left",this.ctx.textBaseline="middle";for(var v=0;v<=5;v++){var d=r+(s-r)*(1-(y=v/5)),m=i+y*n,g=this.formatValue(d,c);this.ctx.fillText(g,e+o+8,m)}}else for(this.ctx.textAlign="center",this.ctx.textBaseline="top",this.ctx.fillText(f,e+o/2,i-l-h),this.ctx.textBaseline="top",v=0;v<=5;v++){d=r+(s-r)*(y=v/5);var y,x=e+y*o;g=this.formatValue(d,c),this.ctx.fillText(g,x,i+n+8)}this.ctx.restore()},t.prototype.formatValue=function(t,e){return Math.abs(t)>=1e3||Math.abs(t)<.01&&0!==t?t.toExponential(1):t%1==0&&Math.abs(t)<100?t.toString():t.toFixed(e)},t.prototype.render=function(){this.isVisible&&(this.ctx.clearRect(0,0,this.overlayCanvas.width,this.overlayCanvas.height),this.drawScale(),this.drawLabels())},t.prototype.getColorAtValue=function(t){var e=this.options,i=e.min,n=e.max,r=e.colorStops,s=Math.max(0,Math.min(1,(t-i)/(n-i))),a=o([],r,!0).sort(function(t,e){return t.position-e.position});if(s<=a[0].position)return a[0].color;if(s>=a[a.length-1].position)return a[a.length-1].color;for(var h=0;h<a.length-1;h++){var p=a[h],u=a[h+1];if(s>=p.position&&s<=u.position){var l=(s-p.position)/(u.position-p.position);return this.interpolateColor(p.color,u.color,l)}}return a[0].color},t.prototype.interpolateColor=function(t,e,i){var o=this.hexToRgb(t),n=this.hexToRgb(e);if(!o||!n)return t;var r=Math.round(o.r+(n.r-o.r)*i),s=Math.round(o.g+(n.g-o.g)*i),a=Math.round(o.b+(n.b-o.b)*i);return"rgb(".concat(r,", ").concat(s,", ").concat(a,")")},t.prototype.hexToRgb=function(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null},t.prototype.updatePosition=function(t,e){this.options.x=t,this.options.y=e,this.render()},t.prototype.updateSize=function(t,e){this.options.width=t,this.options.height=e,this.render()},t.prototype.updateRange=function(t,e){this.options.min=t,this.options.max=e,this.render()},t.prototype.updateColorStops=function(t){this.options.colorStops=t,this.render()},t.prototype.updateOrientation=function(t){this.options.orientation=t,this.render()},t.prototype.updateAttributeName=function(t){this.options.attributeName=t,this.render()},t.prototype.resize=function(t,e){this.overlayCanvas.width=t,this.overlayCanvas.height=e,this.render()},t.prototype.destroy=function(){this.animationId&&cancelAnimationFrame(this.animationId),this.overlayCanvas.parentElement&&this.overlayCanvas.parentElement.removeChild(this.overlayCanvas)},t.prototype.show=function(){this.isVisible=!0,this.overlayCanvas.style.display="block",this.render()},t.prototype.hide=function(){this.isVisible=!1,this.overlayCanvas.style.display="none"},t.prototype.toggle=function(){this.isVisible?this.hide():this.show()},t.prototype.redraw=function(){this.render()},t.prototype.getOptions=function(){return i({},this.options)},t.prototype.isShown=function(){return this.isVisible},t}();e.ColorScale=n},859:function(t,e){var i,o=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),n=this&&this.__assign||function(){return n=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},n.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.Uint32BufferAttribute=e.Uint16BufferAttribute=e.Float32BufferAttribute=e.BufferGeometry=e.BufferAttribute=void 0;var r=function(){function t(t,e,i){void 0===i&&(i=!1),this.array=t,this.itemSize=e,this.count=t.length/e,this.normalized=i,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0,this.needsUpdate=!1}return t.prototype.set=function(t,e){if(e.length!==this.itemSize)throw new Error("Expected ".concat(this.itemSize," values, got ").concat(e.length));if(t<0||t>=this.count)throw new Error("Index ".concat(t," out of range [0, ").concat(this.count-1,"]"));for(var i=t*this.itemSize,o=0;o<this.itemSize;o++)this.array[i+o]=e[o];return this.needsUpdate=!0,this},t.prototype.get=function(t){if(t<0||t>=this.count)throw new Error("Index ".concat(t," out of range [0, ").concat(this.count-1,"]"));for(var e=t*this.itemSize,i=[],o=0;o<this.itemSize;o++)i.push(this.array[e+o]);return i},t.prototype.getX=function(t){if(t<0||t>=this.count)throw new Error("Index ".concat(t," out of range [0, ").concat(this.count-1,"]"));return this.array[t*this.itemSize]},t.prototype.getY=function(t){if(this.itemSize<2)throw new Error("Item size is ".concat(this.itemSize,", cannot get Y component"));return this.array[t*this.itemSize+1]},t.prototype.getZ=function(t){if(this.itemSize<3)throw new Error("Item size is ".concat(this.itemSize,", cannot get Z component"));return this.array[t*this.itemSize+2]},t.prototype.setComponent=function(t,e,i){if(t<0||t>=this.count)throw new Error("Index ".concat(t," out of range [0, ").concat(this.count-1,"]"));if(e<0||e>=this.itemSize)throw new Error("Component ".concat(e," out of range [0, ").concat(this.itemSize-1,"]"));return this.array[t*this.itemSize+e]=i,this.needsUpdate=!0,this},t.prototype.getComponent=function(t,e){if(t<0||t>=this.count)throw new Error("Index ".concat(t," out of range [0, ").concat(this.count-1,"]"));if(e<0||e>=this.itemSize)throw new Error("Component ".concat(e," out of range [0, ").concat(this.itemSize-1,"]"));return this.array[t*this.itemSize+e]},t.prototype.copy=function(t){return this.array=t.array.slice(),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.updateRange=n({},t.updateRange),this.version=t.version,this.needsUpdate=t.needsUpdate,this},t.prototype.copyAt=function(t,e,i){if(this.itemSize!==e.itemSize)throw new Error("ItemSize mismatch: ".concat(this.itemSize," vs ").concat(e.itemSize));var o=e.get(i);return this.set(t,o),this},t.prototype.clone=function(){return new t(new(0,this.array.constructor)(this.array),this.itemSize,this.normalized)},t.prototype.setUsage=function(t){return this.usage=t,this},t.prototype.getByteLength=function(){return this.array.byteLength},t.prototype.forEach=function(t){for(var e=0;e<this.count;e++)t(this.get(e),e);return this},t}();e.BufferAttribute=r;var s=function(){function t(t,e){this.attributes={},this.positions=null,this.indices=null,t&&(this.positions=t),e&&(this.indices=e)}return t.prototype.setPositions=function(t){return this.positions=t,this},t.prototype.getPositions=function(){return this.positions},t.prototype.setIndices=function(t){return this.indices=t,this},t.prototype.getIndices=function(){return this.indices},t.prototype.setAttribute=function(t,e){return this.attributes[t]=e,this},t.prototype.getAttribute=function(t){return this.attributes[t]},t.prototype.computeVertexNormals=function(){if(!this.positions)return console.warn("Cannot compute vertex normals: no position attribute found"),this;var t=this.positions,e=t.count,i=new Float32Array(3*e),o=this.getAttribute("normal");o?(i.fill(0),o.array=i):(o=new a(i,3),this.setAttribute("normal",o));var n=[0,0,0],r=[0,0,0],s=[0,0,0],h=[0,0,0],p=[0,0,0],u=[0,0,0],l=function(t,e,i){i[0]=t[1]*e[2]-t[2]*e[1],i[1]=t[2]*e[0]-t[0]*e[2],i[2]=t[0]*e[1]-t[1]*e[0]},c=function(t,e,i){i[0]=t[0]-e[0],i[1]=t[1]-e[1],i[2]=t[2]-e[2]},f=function(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]};if(this.indices)for(var v=this.indices.array,d=v.length/3,m=0;m<d;m++){var g=v[3*m],y=v[3*m+1],x=v[3*m+2];n[0]=t.getComponent(g,0),n[1]=t.getComponent(g,1),n[2]=t.getComponent(g,2),r[0]=t.getComponent(y,0),r[1]=t.getComponent(y,1),r[2]=t.getComponent(y,2),s[0]=t.getComponent(x,0),s[1]=t.getComponent(x,1),s[2]=t.getComponent(x,2),c(r,n,h),c(s,n,p),l(h,p,u);var _=[i[3*g],i[3*g+1],i[3*g+2]],b=[i[3*y],i[3*y+1],i[3*y+2]],C=[i[3*x],i[3*x+1],i[3*x+2]];f(_,u),f(b,u),f(C,u),i[3*g]=_[0],i[3*g+1]=_[1],i[3*g+2]=_[2],i[3*y]=b[0],i[3*y+1]=b[1],i[3*y+2]=b[2],i[3*x]=C[0],i[3*x+1]=C[1],i[3*x+2]=C[2]}else for(d=e/3,m=0;m<d;m++)g=3*m,y=3*m+1,x=3*m+2,n[0]=t.getComponent(g,0),n[1]=t.getComponent(g,1),n[2]=t.getComponent(g,2),r[0]=t.getComponent(y,0),r[1]=t.getComponent(y,1),r[2]=t.getComponent(y,2),s[0]=t.getComponent(x,0),s[1]=t.getComponent(x,1),s[2]=t.getComponent(x,2),c(r,n,h),c(s,n,p),l(h,p,u),i[3*g]=u[0],i[3*g+1]=u[1],i[3*g+2]=u[2],i[3*y]=u[0],i[3*y+1]=u[1],i[3*y+2]=u[2],i[3*x]=u[0],i[3*x+1]=u[1],i[3*x+2]=u[2];for(m=0;m<e;m++){var w=i[3*m],M=i[3*m+1],S=i[3*m+2],I=Math.sqrt(w*w+M*M+S*S);I>0?(i[3*m]=w/I,i[3*m+1]=M/I,i[3*m+2]=S/I):(i[3*m]=0,i[3*m+1]=1,i[3*m+2]=0)}return o.needsUpdate=!0,this},t}();e.BufferGeometry=s;var a=function(t){function e(e,i,o){void 0===o&&(o=!1);var n=e instanceof Float32Array?e:new Float32Array(e);return t.call(this,n,i,o)||this}return o(e,t),e}(r);e.Float32BufferAttribute=a;var h=function(t){function e(e,i,o){void 0===o&&(o=!1);var n=e instanceof Uint16Array?e:new Uint16Array(e);return t.call(this,n,i,o)||this}return o(e,t),e}(r);e.Uint16BufferAttribute=h;var p=function(t){function e(e,i,o){void 0===o&&(o=!1);var n=e instanceof Uint32Array?e:new Uint32Array(e);return t.call(this,n,i,o)||this}return o(e,t),e}(r);e.Uint32BufferAttribute=p},879:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Color=void 0;var i=function(){function t(e){if(e)if(Array.isArray(e)){if(3!==e.length)throw new Error("RGB array must have exactly 3 elements");this.r=e[0],this.g=e[1],this.b=e[2]}else if("string"==typeof e){if(!/^#([0-9A-F]{3}|[0-9A-F]{6})$/i.test(e))throw new Error("Invalid hex color format");this.setHex(e)}else if("number"==typeof e)this.setHex(t.toHexString(e));else if("number"==typeof e)this.setHex(t.toHexString(e));else{if("object"!=typeof e)throw new Error("Invalid color format. Must be an array of 3 numbers, a hex string, or a Color instance. Got ".concat(e));this.r=e.r,this.g=e.g,this.b=e.b}else this.r=0,this.g=0,this.b=0}return t.prototype.lerp=function(e,i){if(i<0||i>1)throw new Error("Interpolation factor t must be between 0 and 1");if(!(e instanceof t))throw new Error("Argument must be an instance of Color");return new t({r:this.r+(e.r-this.r)*i,g:this.g+(e.g-this.g)*i,b:this.b+(e.b-this.b)*i})},t.toHexString=function(t){return"#"+(16777215&t).toString(16).padStart(6,"0").toUpperCase()},t.prototype.toHex=function(){var t=Math.round(255*this.r).toString(16).padStart(2,"0"),e=Math.round(255*this.g).toString(16).padStart(2,"0"),i=Math.round(255*this.b).toString(16).padStart(2,"0");return"#".concat(t).concat(e).concat(i)},t.prototype.setHex=function(t){if(6!==(t=t.replace("#","")).length)throw new Error("Invalid hex color format");return this.r=parseInt(t.substring(0,2),16)/255,this.g=parseInt(t.substring(2,4),16)/255,this.b=parseInt(t.substring(4,6),16)/255,this},t}();e.Color=i},906:function(t,e,i){var o=this&&this.__spreadArray||function(t,e,i){if(i||2===arguments.length)for(var o,n=0,r=e.length;n<r;n++)!o&&n in e||(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.IsoContoursFilled=e.createIsoContoursFilled=void 0;var n=i(879),r=i(97),s=i(185);e.createIsoContoursFilled=function(t,e,i,o){var n=void 0===o?{}:o,r=n.min,s=void 0===r?void 0:r,h=n.max,p=void 0===h?void 0:h,u=n.lut,l=void 0===u?"Rainbow":u,c=n.nbColors;return new a(l,void 0===c?128:c,i).run(t,e,s,p)};var a=function(){function t(t,e,i){this.attr=void 0,this.nodes_=void 0,this.segment_list_=[],this.vmin_=0,this.vmax_=1,this.color_=new n.Color("#000000"),this.lutTable_=(0,r.createLut)("Insar",128),this.position_=[],this.index_=[],this.colors_=[],this.isoValues_=[],this.normals_=[],this.nnormals_=void 0,this.color_=new n.Color("#000000"),this.lutTable_=(0,r.createLut)(t,e),this.lutTable_.setMin(0),this.lutTable_.setMax(1),this.isoValues_=i}return Object.defineProperty(t.prototype,"position",{get:function(){return this.position_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"index",{get:function(){return this.index_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return this.colors_},enumerable:!1,configurable:!0}),t.prototype.run=function(t,e,i,o){void 0===i&&(i=void 0),void 0===o&&(o=void 0),this.attr=e;var n=(0,s.minMax)(this.attr);if(this.vmin_=void 0!==i?i:n[0],this.vmax_=void 0!==o?o:n[1],0===this.isoValues_.length)return{position:[],index:[],color:[],normal:[]};var r=t.getIndices().array;this.nodes_=t.getPositions(),this.nnormals_=t.getAttribute("normal"),void 0===this.nnormals_&&(t.computeVertexNormals(),this.nnormals_=t.getAttribute("normal"));for(var a=0;a<r.length;a+=3)this.classify(r[a],r[a+1],r[a+2]);return{position:this.position_,index:this.index_,color:this.colors_,normal:this.normals_}},t.prototype.normalizeAttr=function(t){return(t-this.vmin_)/(this.vmax_-this.vmin_)},t.prototype.getNode=function(t){return this.nodes_.get(t)},t.prototype.getNormal=function(t){return this.nnormals_.get(t)},t.prototype.getAttr=function(t){return this.attr[t]},t.prototype.classify=function(t,e,i){var o,n,r,s,a,h,u=new p;u.v1=this.getAttr(t),u.p1=this.getNode(t),u.n1=this.getNormal(t),u.v2=this.getAttr(e),u.p2=this.getNode(e),u.n2=this.getNormal(e),u.v3=this.getAttr(i),u.p3=this.getNode(i),u.n3=this.getNormal(i);var l=0,c=0,f=0;if(u.v1<=u.v2&&u.v1<=u.v3)s=u.p1,l=u.v1,o=u.n1,u.v2<=u.v3?(a=u.p2,h=u.p3,c=u.v2,f=u.v3,n=u.n2,r=u.n3):(a=u.p3,h=u.p2,c=u.v3,f=u.v2,n=u.n3,r=u.n2,u.reversed=!0);else if(u.v2<=u.v1&&u.v2<=u.v3)s=u.p2,l=u.v2,o=u.n2,u.v1<=u.v3?(a=u.p1,h=u.p3,c=u.v1,f=u.v3,n=u.n1,r=u.n3,u.reversed=!0):(a=u.p3,h=u.p1,c=u.v3,f=u.v1,n=u.n3,r=u.n1);else{if(!(u.v3<=u.v1&&u.v3<=u.v2))return;s=u.p3,l=u.v3,o=u.n3,u.v1<=u.v2?(a=u.p1,h=u.p2,c=u.v1,f=u.v2,n=u.n1,r=u.n2):(a=u.p2,h=u.p1,c=u.v2,f=u.v1,n=u.n2,r=u.n1,u.reversed=!0)}u.p1=s,u.p2=a,u.p3=h,u.v1=l,u.v2=c,u.v3=f,u.n1=o,u.n2=n,u.n3=r,this.createSegmentList(u),this.createPolygons(u),e=i},t.prototype.createSegmentList=function(t){this.segment_list_=[],t.notIntersectedPolygonValue=this.vmin_;for(var e=0,i=this.isoValues_;e<i.length;e++){var o=i[e];if(o>=t.v3)break;o>t.v1?this.addSegment(o,t):t.notIntersectedPolygonValue=o}},t.prototype.addSegment=function(t,e){var i=new h;i.iso=t;var o=e.v1,n=e.v2,r=e.v3,s=e.p1,a=e.p2,p=e.p3;if(t<e.v2){var u=f(o,n,t),l=f(o,r,t);i.p1=c(s,a,u),i.p2=c(s,p,l),i.n1=c(e.n1,e.n2,u),i.n2=c(e.n1,e.n3,l)}else u=f(n,r,t),l=f(o,r,t),i.p1=c(a,p,u),i.p2=c(s,p,l),i.n1=c(e.n2,e.n3,u),i.n2=c(e.n1,e.n3,l);this.segment_list_.push(i)},t.prototype.createPolygons=function(t){if(!((t.v1<this.vmin_||t.v1>this.vmax_)&&(t.v2<this.vmin_||t.v2>this.vmax_)&&(t.v3<this.vmin_||t.v3>this.vmax_))){var e=function(t){return[-t[0],-t[1],-t[2]]},i=!1;if(t.reversed){if(0===this.segment_list_.length)return void this.addTri(t.p1,t.p3,t.p2,t.n1,t.n3,t.n2,t.notIntersectedPolygonValue);(n=u(this.segment_list_)).iso<t.v2?this.addTri(t.p1,n.p2,n.p1,t.n1,n.n2,n.n1,t.notIntersectedPolygonValue):(i=!0,this.addQuad(t.p1,n.p2,n.p1,t.p2,t.n1,n.n2,n.n1,t.n2,t.notIntersectedPolygonValue));for(var o=1;o<this.segment_list_.length;++o)(r=this.segment_list_[o]).iso<t.v2?this.addQuad(n.p1,r.p1,r.p2,n.p2,e(n.n1),e(r.n1),e(r.n2),e(n.n2),n.iso):i?this.addQuad(n.p1,n.p2,r.p2,r.p1,n.n1,n.n2,r.n2,r.n1,n.iso):(i=!0,this.addPoly(t.p2,n.p1,n.p2,r.p2,r.p1,t.n2,n.n1,n.n2,r.n2,r.n1,n.iso)),n=r;n=l(this.segment_list_),i?this.addTri(n.p1,n.p2,t.p3,n.n1,n.n2,t.n3,n.iso):this.addQuad(t.p2,n.p1,n.p2,t.p3,t.n2,n.n1,n.n2,t.n3,n.iso)}else{if(0===this.segment_list_.length)return void this.addTri(t.p1,t.p2,t.p3,t.n1,t.n2,t.n3,t.notIntersectedPolygonValue);var n;for((n=u(this.segment_list_)).iso<t.v2?this.addTri(t.p1,n.p1,n.p2,t.n1,n.n1,n.n2,t.notIntersectedPolygonValue):(i=!0,this.addQuad(t.p1,t.p2,n.p1,n.p2,t.n1,t.n2,n.n1,n.n2,t.notIntersectedPolygonValue)),o=1;o<this.segment_list_.length;++o){var r;(r=this.segment_list_[o]).iso<t.v2||i?this.addQuad(n.p1,r.p1,r.p2,n.p2,n.n1,r.n1,r.n2,n.n2,n.iso):(i=!0,this.addPoly(t.p2,r.p1,r.p2,n.p2,n.p1,t.n2,r.n1,r.n2,n.n2,n.n1,n.iso)),n=r}n=l(this.segment_list_),i?this.addTri(n.p1,t.p3,n.p2,n.n1,t.n3,n.n2,n.iso):this.addQuad(t.p2,t.p3,n.p2,n.p1,t.n2,t.n3,n.n2,n.n1,n.iso)}}},t.prototype.addTri=function(t,e,i,n,r,a,h){var p,u,l;if(!(h<this.vmin_||h>this.vmax_)){var c=(0,s.fromValueToColor)(this.normalizeAttr(h),{defaultColor:this.color_,lutTable:this.lutTable_}),f=this.position_.length/3;(p=this.position_).push.apply(p,o(o(o([],t,!1),e,!1),i,!1)),this.index_.push(f,f+1,f+2),(u=this.colors_).push.apply(u,o(o(o([],c,!1),c,!1),c,!1)),(l=this.normals_).push.apply(l,o(o(o([],n,!1),r,!1),a,!1))}},t.prototype.addQuad=function(t,e,i,n,r,a,h,p,u){var l,c,f;if(!(u<this.vmin_||u>this.vmax_)){var v=(0,s.fromValueToColor)(this.normalizeAttr(u),{defaultColor:this.color_,lutTable:this.lutTable_}),d=this.position_.length/3;(l=this.position_).push.apply(l,o(o(o(o([],t,!1),e,!1),i,!1),n,!1)),this.index_.push(d,d+1,d+2,d,d+2,d+3),(c=this.colors_).push.apply(c,o(o(o(o([],v,!1),v,!1),v,!1),v,!1)),(f=this.normals_).push.apply(f,o(o(o(o([],r,!1),a,!1),h,!1),p,!1))}},t.prototype.addPoly=function(t,e,i,n,r,a,h,p,u,l,c){var f,v,d;if(!(c<this.vmin_||c>this.vmax_)){var m=(0,s.fromValueToColor)(this.normalizeAttr(c),{defaultColor:this.color_,lutTable:this.lutTable_}),g=this.position_.length/3;(f=this.position_).push.apply(f,o(o(o(o(o([],t,!1),e,!1),i,!1),n,!1),r,!1)),this.index_.push(g,g+1,g+2,g,g+2,g+3,g,g+3,g+4),(v=this.colors_).push.apply(v,o(o(o(o(o([],m,!1),m,!1),m,!1),m,!1),m,!1)),(d=this.normals_).push.apply(d,o(o(o(o(o([],a,!1),h,!1),p,!1),u,!1),l,!1))}},t}();e.IsoContoursFilled=a;var h=function(){this.p1=[0,0,0],this.p2=[0,0,0],this.n1=[0,0,1],this.n2=[0,0,1],this.iso=0},p=function(){this.reversed=!1,this.p1=[0,0,0],this.p2=[0,0,0],this.p3=[0,0,0],this.n1=[1,0,0],this.n2=[1,0,0],this.n3=[1,0,0],this.v1=0,this.v2=0,this.v3=0,this.notIntersectedPolygonValue=0},u=function(t){return t[0]},l=function(t){return t[t.length-1]};function c(t,e,i){var o=1-i;return[i*t[0]+o*e[0],i*t[1]+o*e[1],i*t[2]+o*e[2]]}function f(t,e,i){return 1-Math.abs(i-t)/Math.abs(e-t)}}},e={};return function i(o){var n=e[o];if(void 0!==n)return n.exports;var r=e[o]={exports:{}};return t[o].call(r.exports,r,r.exports,i),r.exports}(156)})());