!function(t,o){"object"==typeof exports&&"object"==typeof module?module.exports=o():"function"==typeof define&&define.amd?define([],o):"object"==typeof exports?exports.keplerlit=o():t.keplerlit=o()}(this,()=>(()=>{"use strict";var t={97:(t,o,e)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ColorMap=o.addColorMap=o.colorMapNames=o.createLut=void 0;var i=e(879);o.createLut=function(t,o,e){void 0===e&&(e=1);for(var i=r[t]||r.Rainbow,s=[],a=0,h=0;h<e;++h)i.forEach(function(t){s.push([a+t[0]/e,t[1]])}),a+=1/e;return new n(s,o)},o.colorMapNames=function(){for(var t=[],o=0,e=Object.entries(r);o<e.length;o++){var i=e[o],n=i[0];i[1],t.push(n)}return t},o.addColorMap=function(t,o){r[t]=o};var n=function(){function t(t,o){this.map=[],this.lut=[],this.n=256,this.minV=0,this.maxV=1,this.setColorMap(t,o)}return t.addColorMap=function(t,o){r[t]=o},Object.defineProperty(t.prototype,"mapColors",{get:function(){return this.map},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvas",{get:function(){return this.canvas_},enumerable:!1,configurable:!0}),t.prototype.set=function(o){return o instanceof t&&this.copy(o),this},Object.defineProperty(t.prototype,"length",{get:function(){return this.map.length},enumerable:!1,configurable:!0}),t.prototype.setMin=function(t){return this.minV=t,this},t.prototype.setMax=function(t){return this.maxV=t,this},t.prototype.setColorMap=function(t,o){Array.isArray(t)?this.map=t:this.map=r[t]||r.Rainbow,this.n=o||32;var e=1/this.n;this.lut=[];for(var n=0;n<=1;n+=e)for(var s=0;s<this.map.length-1;s++)if(n>=this.map[s][0]&&n<this.map[s+1][0]){var a=this.map[s][0],h=this.map[s+1][0],p=new i.Color(this.map[s][1]),c=new i.Color(this.map[s+1][1]),l=p.lerp(c,(n-a)/(h-a));this.lut.push(l)}return this},t.prototype.copy=function(t){return this.lut=t.lut,this.map=t.map,this.n=t.n,this.minV=t.minV,this.maxV=t.maxV,this},t.prototype.getColor=function(t){t<=this.minV?t=this.minV:t>=this.maxV&&(t=this.maxV),t=(t-this.minV)/(this.maxV-this.minV);var o=Math.round(t*this.n);return o===this.n&&(o-=1),this.lut[o]},t.prototype.createCanvas=function(t,o){void 0===t&&(t=document),void 0===o&&(o=1);var e=t.createElement("canvas");return e.width=o,e.height=this.n,this.updateCanvas(e),e},t.prototype.updateCanvas=function(t){this.canvas_=t;for(var o=t.getContext("2d",{alpha:!1}),e=0,n=1/this.n,r=1;r>=0;r-=n)for(var s=this.map.length-1;s>=0;s--)if(r<this.map[s][0]&&r>=this.map[s-1][0]){var a=this.map[s-1][0],h=this.map[s][0],p=new i.Color(this.map[s-1][1]),c=new i.Color(this.map[s][1]),l=p.lerp(c,(r-a)/(h-a));o.fillStyle="rgb(".concat(Math.round(255*l.r),", ").concat(Math.round(255*l.g),", ").concat(Math.round(255*l.b),")"),o.fillRect(0,e,15,1),e+=1}return t},t}();o.ColorMap=n;var r={Cooltowarm:[[0,3952322],[.2,10206463],[.5,14474460],[.8,16163717],[1,11797542]],Blackbody:[[0,0],[.2,7864320],[.5,15086080],[.8,16776960],[1,16777215]],Grayscale:[[0,0],[.2,4210752],[.5,8355712],[.8,12566463],[1,16777215]],Insar:[[0,327893],[.3,47871],[.5,65478],[.7,16580352],[1,13631488]],InsarBanded:[[0,327893],[.02040816326530612,47871],[.04081632653061224,65478],[.061224489795918366,16580352],[.08163265306122448,13631488],[.1020408163265306,327893],[.12244897959183673,47871],[.14285714285714285,65478],[.16326530612244897,16580352],[.18367346938775508,13631488],[.2040816326530612,327893],[.22448979591836732,47871],[.24489795918367346,65478],[.26530612244897955,16580352],[.2857142857142857,13631488],[.3061224489795918,327893],[.32653061224489793,47871],[.3469387755102041,65478],[.36734693877551017,16580352],[.3877551020408163,13631488],[.4081632653061224,327893],[.42857142857142855,47871],[.44897959183673464,65478],[.4693877551020408,16580352],[.4897959183673469,13631488],[.5102040816326531,327893],[.5306122448979591,47871],[.5510204081632653,65478],[.5714285714285714,16580352],[.5918367346938775,13631488],[.6122448979591836,327893],[.6326530612244897,47871],[.6530612244897959,65478],[.673469387755102,16580352],[.6938775510204082,13631488],[.7142857142857142,327893],[.7346938775510203,47871],[.7551020408163265,65478],[.7755102040816326,16580352],[.7959183673469387,13631488],[.8163265306122448,327893],[.836734693877551,47871],[.8571428571428571,65478],[.8775510204081632,16580352],[.8979591836734693,13631488],[.9183673469387754,327893],[.9387755102040816,47871],[.9591836734693877,65478],[.9795918367346939,16580352],[.9999999999999999,13631488]],Rainbow:[[0,16711680],[.2,16776192],[.4,65286],[.6,65532],[.8,393471],[1,16122111]],Igeoss:[[0,13863],[.1,35387],[.2,6864397],[.3,14081792],[.4,16437248],[.5,16760848],[.6,16756238],[.7,16751366],[.8,16406528],[.9,15204360],[1,8912899]],Stress:[[0,255],[.33,16777215],[.331,51200],[.66,16777215],[.661,16711680],[1,16777215]],Blue_White_Red:[[0,4863],[.5,16777215],[1,16711680]],Blue_Green_Red:[[0,4863],[.25,16777215],[.5,65280],[.275,16777215],[1,16711680]],Spectrum:[[0,16777215],[.1428,16711680],[.2856,16711932],[.4284,393471],[.5712,63231],[.714,65286],[.8568,16776192],[1,16711680]],Default:[[0,786687],[.25,64767],[.5,65292],[.75,16187136],[1,16711680]],Banded:[[0,16774605],[.1666,16750080],[.1667,13565905],[.3333,1077504],[.3334,13952251],[.5,90031],[.5001,15458043],[.6666,12911262],[.6667,16773323],[.8333,8674560],[.8334,16373976],[1,14286848]]}},156:function(t,o,e){var i=this&&this.__createBinding||(Object.create?function(t,o,e,i){void 0===i&&(i=e);var n=Object.getOwnPropertyDescriptor(o,e);n&&!("get"in n?!o.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return o[e]}}),Object.defineProperty(t,i,n)}:function(t,o,e,i){void 0===i&&(i=e),t[i]=o[e]}),n=this&&this.__exportStar||function(t,o){for(var e in t)"default"===e||Object.prototype.hasOwnProperty.call(o,e)||i(o,t,e)};Object.defineProperty(o,"__esModule",{value:!0}),n(e(879),o),n(e(97),o),n(e(185),o),n(e(906),o),n(e(487),o),n(e(859),o),n(e(291),o),n(e(797),o),n(e(610),o)},185:(t,o,e)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.fromValuesToColors=o.fromValueToColor=o.scale=o.normalize=o.min=o.max=o.minMax=o.lerp=void 0;var i=e(97);function n(t){for(var o=Number.POSITIVE_INFINITY,e=Number.NEGATIVE_INFINITY,i=t.length,n=0;n<i;++n){var r=t[n];r<o&&(o=r),r>e&&(e=r)}return[o,e]}o.lerp=function(t,o,e){if(t<0||t>1)throw new Error("t must be clamped to the range [0,1]. Got ".concat(t));return(1-t)*o+t*e},o.minMax=n,o.max=function(t){for(var o=Number.NEGATIVE_INFINITY,e=t.length,i=0;i<e;++i){var n=t[i];n>o&&(o=n)}return o},o.min=function(t){for(var o=Number.POSITIVE_INFINITY,e=t.length,i=0;i<e;++i){var n=t[i];n<o&&(o=n)}return o},o.normalize=function(t){var o=n(t);return t.map(function(t){return(t-o[0])/(o[1]-o[0])})},o.scale=function(t,o){return t.map(function(t){return t*o})},o.fromValueToColor=function(t,o){var e=o.min,i=void 0===e?0:e,n=o.max,r=void 0===n?1:n,s=o.lutTable,a=o.defaultColor,h=o.reverse,p=void 0!==h&&h;if(t<0||t>1)throw new Error("value *must% be normalized. Got ".concat(t));var c=p?1-t:t;if(c>=i&&c<=r){var l=s.getColor(c);return[l.r,l.g,l.b]}return[a.r,a.g,a.b]},o.fromValuesToColors=function(t,o){var e=o.defaultColor,r=o.lut,s=o.duplicateLut,a=void 0===s?1:s,h=o.min,p=void 0===h?0:h,c=o.max,l=void 0===c?1:c,u=o.lockLut,f=void 0===u||u,d=o.reverse,v=void 0!==d&&d,y=r instanceof i.ColorMap?r:(0,i.createLut)(r,32,a),g=n(t),m=g[0],b=g[1];f?y.setMin(0).setMax(1):y.setMin(p).setMax(l);var x=new Array(3*t.length).fill(0);return t.forEach(function(t,o){var i=v?(t-b)/(m-b):(t-m)/(b-m);if(i>=p&&i<=l){var n=y.getColor(i);x[3*o]=n.r,x[3*o+1]=n.g,x[3*o+2]=n.b}else x[3*o]=e.r,x[3*o+1]=e.g,x[3*o+2]=e.b}),x}},291:function(t,o){var e=this&&this.__assign||function(){return e=Object.assign||function(t){for(var o,e=1,i=arguments.length;e<i;e++)for(var n in o=arguments[e])Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n]);return t},e.apply(this,arguments)};Object.defineProperty(o,"__esModule",{value:!0}),o.BaseOverlay=void 0;var i=function(){function t(t){if(this.animationId=null,this.isVisible=!0,this.canvas=t.canvas,this.overlayCanvas=document.createElement("canvas"),this.overlayCanvas.width=this.canvas.width,this.overlayCanvas.height=this.canvas.height,this.overlayCanvas.style.position="absolute",this.overlayCanvas.style.top="0",this.overlayCanvas.style.left="0",this.overlayCanvas.style.pointerEvents="none",this.overlayCanvas.style.zIndex="1000",this.canvas.parentElement){var o=this.canvas.parentElement;"static"===getComputedStyle(o).position&&(o.style.position="relative"),o.appendChild(this.overlayCanvas)}else document.body.appendChild(this.overlayCanvas);var i=this.overlayCanvas.getContext("2d");if(!i)throw new Error("Unable to get 2D context from overlay canvas");this.ctx=i,this.options=e({fontSize:11,fontFamily:"Arial, sans-serif",textColor:"#333333",backgroundColor:"rgba(255, 255, 255, 0.95)",borderColor:"#cccccc",borderWidth:1,labelOffset:25,precision:1},t),this.render()}return t.prototype.formatValue=function(t,o){return Math.abs(t)>=1e3||Math.abs(t)<.01&&0!==t?t.toExponential(1):t%1==0&&Math.abs(t)<100?t.toString():t.toFixed(o)},t.prototype.render=function(){this.isVisible&&this.ctx.clearRect(0,0,this.overlayCanvas.width,this.overlayCanvas.height)},t.prototype.updatePosition=function(t,o){this.options.x=t,this.options.y=o,this.render()},t.prototype.updateSize=function(t,o){this.options.width=t,this.options.height=o,this.render()},t.prototype.resize=function(t,o){this.overlayCanvas.width=t,this.overlayCanvas.height=o,this.render()},t.prototype.destroy=function(){this.animationId&&cancelAnimationFrame(this.animationId),this.overlayCanvas.parentElement&&this.overlayCanvas.parentElement.removeChild(this.overlayCanvas)},t.prototype.show=function(){this.isVisible=!0,this.overlayCanvas.style.display="block",this.render()},t.prototype.hide=function(){this.isVisible=!1,this.overlayCanvas.style.display="none"},t.prototype.toggle=function(){this.isVisible?this.hide():this.show()},t.prototype.redraw=function(){this.render()},t.prototype.getOptions=function(){return e({},this.options)},t.prototype.isShown=function(){return this.isVisible},t}();o.BaseOverlay=i},487:(t,o,e)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.createIsoContourLines=void 0;var i=e(879),n=e(97),r=e(747),s=e(185);o.createIsoContourLines=function(t,o,e,a,h){var p=this;if(void 0===t)throw new Error("mesh is undefined");if(void 0===t.getPositions())throw new Error("mesh.positions is undefined");if(void 0===t.getIndices())throw new Error("mesh.indices is undefined");if(void 0===o)throw new Error("attribute is undefined");var c=(0,s.minMax)(o),l=c[0],u=c[1],f=void 0;null==h&&((f=(0,n.createLut)(h,128)).setMin(l),f.setMax(u));var d=new i.Color(a),v=e,y=new r.MarchingTriangles;y.setup(t.getIndices(),[l,u]);for(var g=t.getPositions(),m=[],b=[],x=function(t){return(t-p.vmin_)/(p.vmax_-p.vmin_)},_=0;_<v.length;++_){var w=y.isolines(o,v[_]),C=(0,s.fromValueToColor)(x(v[_]),{min:l,max:u,defaultColor:d,lutTable:f});b.push.apply(b,C);for(var M=0;M<w[0].length;++M)for(var S=0;S<w[0][M].length-2;S+=2){var A=w[0][M][S],T=w[0][M][S+1],I=w[1][M][S/2],P=g.get(A),O=g.get(T),V=P[0],E=P[1],k=P[2],z=O[0],j=O[1],N=O[2];m.push(V+I*(z-V),E+I*(j-E),k+I*(N-k))}}return{positions:m,color:b}}},610:function(t,o,e){var i,n=this&&this.__extends||(i=function(t,o){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)Object.prototype.hasOwnProperty.call(o,e)&&(t[e]=o[e])},i(t,o)},function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function e(){this.constructor=t}i(t,o),t.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}),r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var o,e=1,i=arguments.length;e<i;e++)for(var n in o=arguments[e])Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n]);return t},r.apply(this,arguments)};Object.defineProperty(o,"__esModule",{value:!0}),o.Compass2D=void 0;var s=function(t){function o(o){var e,i,n,s,a,h,p,c,l,u,f,d,v,y=this;return(y=t.call(this,o)||this).options=r({width:200,height:200,x:100,y:100,fontSize:11,fontFamily:"Arial, sans-serif",textColor:"#333333",backgroundColor:"rgba(255, 255, 255, 0.95)",borderColor:"#cccccc",borderWidth:1,labelOffset:25,precision:1,cameraAngle:null!==(e=o.cameraAngle)&&void 0!==e?e:o.cameraAngle=45,opacity:null!==(i=o.opacity)&&void 0!==i?i:o.opacity=.9,visible:null!==(n=o.visible)&&void 0!==n?n:o.visible=!0,colors:{primary:null!==(s=(l=o.colors).primary)&&void 0!==s?s:l.primary="#ff4444",secondary:null!==(a=(u=o.colors).secondary)&&void 0!==a?a:u.secondary="#ffffff",accent:null!==(h=(f=o.colors).accent)&&void 0!==h?h:f.accent="#ffaa00",background:null!==(p=(d=o.colors).background)&&void 0!==p?p:d.background="rgba(0,0,0,0.4)",text:null!==(c=(v=o.colors).text)&&void 0!==c?c:v.text="#ffffff"}},o),y.canvas.width=window.innerWidth,y.canvas.height=window.innerHeight,y.render(),y}return n(o,t),o.prototype.setPosition=function(t,o){this.options.x=t,this.options.y=o},o.prototype.setPositionByName=function(t){var o=this.options.width+20;switch(t){case"top-right":this.setPosition(this.canvas.width-o,o);break;case"top-left":this.setPosition(o,o);break;case"bottom-right":this.setPosition(this.canvas.width-o,this.canvas.height-o);break;case"bottom-left":this.setPosition(o,this.canvas.height-o);break;case"center":this.setPosition(this.canvas.width/2,this.canvas.height/2)}},o.prototype.setCameraAngle=function(t){this.options.cameraAngle=t},o.prototype.setOpacity=function(t){this.options.opacity=t},o.prototype.setVisible=function(t){this.options.visible=t},o.prototype.setOrientationCallback=function(t){this.onOrientationChange=t},o.prototype.getDirectionAngle=function(t){return{N:0,NE:45,E:90,SE:135,S:180,SW:225,W:270,NW:315,center:this.options.cameraAngle}[t]},o.prototype.getCurrentDirection=function(){var t=(this.options.cameraAngle%360+360)%360;return t>=337.5||t<22.5?"N":t>=22.5&&t<67.5?"NE":t>=67.5&&t<112.5?"E":t>=112.5&&t<157.5?"SE":t>=157.5&&t<202.5?"S":t>=202.5&&t<247.5?"SW":t>=247.5&&t<292.5?"W":t>=292.5&&t<337.5?"NW":"N"},o.prototype.orientToDirection=function(t,o){void 0===o&&(o=!0);var e=this.getDirectionAngle(t);o?this.animateToAngle(e):(this.setCameraAngle(e),this.render()),this.onOrientationChange&&this.onOrientationChange(t,e)},o.prototype.animateToAngle=function(t,o){var e=this;void 0===o&&(o=1e3);var i=this.options.cameraAngle,n=Date.now(),r=t-i;r>180&&(r-=360),r<-180&&(r+=360);var s=function(){var t=Date.now()-n,a=Math.min(t/o,1),h=a<.5?2*a*a:1-Math.pow(-2*a+2,2)/2,p=i+r*h;e.setCameraAngle(p),e.render(),a<1&&requestAnimationFrame(s)};s()},o.prototype.getAvailableDirections=function(){return["N","NE","E","SE","S","SW","W","NW","center"]},o.prototype.drawArrow=function(t,o,e,i){void 0===i&&(i=2);var n=this.ctx;if(n){var r=(t+this.options.cameraAngle)*Math.PI/180,s=this.options.x+Math.cos(r)*o,a=this.options.y+Math.sin(r)*o;n.save(),n.globalAlpha=this.options.opacity,n.strokeStyle=e,n.fillStyle=e,n.lineWidth=i,n.lineCap="round",n.beginPath(),n.moveTo(this.options.x,this.options.y),n.lineTo(s,a),n.stroke();var h=.25*o,p=Math.PI/6;n.beginPath(),n.moveTo(s,a),n.lineTo(s-h*Math.cos(r-p),a-h*Math.sin(r-p)),n.moveTo(s,a),n.lineTo(s-h*Math.cos(r+p),a-h*Math.sin(r+p)),n.stroke(),n.restore()}},o.prototype.drawDirectionLabel=function(t,o,e){var i=this.ctx;if(i){var n=(t+this.options.cameraAngle)*Math.PI/180,r=this.options.x+Math.cos(n)*e,s=this.options.y+Math.sin(n)*e;i.save(),i.globalAlpha=this.options.opacity,i.fillStyle=this.options.colors.text,i.font="bold ".concat(.2*this.options.width,"px Arial"),i.textAlign="center",i.textBaseline="middle",i.shadowColor="rgba(0,0,0,0.8)",i.shadowBlur=2,i.shadowOffsetX=1,i.shadowOffsetY=1,i.fillText(o,r,s),i.restore()}},o.prototype.drawTicks=function(){var t=this.ctx;if(t){t.save(),t.globalAlpha=.7*this.options.opacity;for(var o=0;o<360;o+=45){var e=(o+this.options.cameraAngle)*Math.PI/180,i=.7*this.options.width,n=.85*this.options.width,r=this.options.x+Math.cos(e)*i,s=this.options.y+Math.sin(e)*i,a=this.options.x+Math.cos(e)*n,h=this.options.y+Math.sin(e)*n;t.strokeStyle=this.options.colors.secondary,t.lineWidth=1.5,t.beginPath(),t.moveTo(r,s),t.lineTo(a,h),t.stroke()}t.restore()}},o.prototype.drawBackground=function(){var t=this.ctx;t&&(t.save(),t.globalAlpha=this.options.opacity,t.fillStyle=this.options.colors.background,t.strokeStyle=this.options.colors.secondary,t.lineWidth=2,t.beginPath(),t.arc(this.options.x,this.options.y,this.options.width,0,2*Math.PI),t.fill(),t.stroke(),t.fillStyle=this.options.colors.accent,t.beginPath(),t.arc(this.options.x,this.options.y,3,0,2*Math.PI),t.fill(),t.restore())},o.prototype.render=function(){if(this.options.visible&&this.ctx){t.prototype.render.call(this),this.drawBackground(),this.drawTicks(),this.drawArrow(0,.6*this.options.width,this.options.colors.primary,3),this.drawArrow(180,.5*this.options.width,this.options.colors.secondary,2),this.drawArrow(90,.5*this.options.width,this.options.colors.secondary,2),this.drawArrow(270,.5*this.options.width,this.options.colors.secondary,2);var o=1.15*this.options.width;this.drawDirectionLabel(0,"N",o),this.drawDirectionLabel(90,"E",o),this.drawDirectionLabel(180,"S",o),this.drawDirectionLabel(270,"W",o)}},o}(e(291).BaseOverlay);o.Compass2D=s},747:(t,o,e)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.MarchingTriangles=void 0;var i=e(185),n=function(){function t(){this.topo_=[],this.lock_=!1,this.maxVertexIndex_=-1,this._bounds=[]}return t.prototype.setup=function(t,o){this.lock_=!1,this.maxVertexIndex_=-1,this._bounds=o,this.topo_=[];for(var e=0;e<t.array.length;e+=3){var i=t.array[e],n=t.array[e+1],r=t.array[e+2];if(this.topo_.push({i,j:n,k:r}),i===n||i===r||n===r)throw new Error("Error in topology while setting up iso-contouring in 'MarchingTriangles.' At index ".concat(e,", got 3 indices (").concat(i,", ").concat(n,", ").concat(r,")"));this.maxVertexIndex_=Math.max(this.maxVertexIndex_,i,n,r)}return this.lock_=!0,!0},t.prototype.isolines=function(t,o){var e=[[]];if(!1===this.lock_)return e;if(t.length<0)return e;void 0===this._bounds&&(this._bounds=(0,i.minMax)(t));for(var n=new Map,h=[],p=[0,0,0],c=new Map(new Map),l=0;l<this.topo_.length;++l){p[0]=this.topo_[l].i,p[1]=this.topo_[l].j,p[2]=this.topo_[l].k;var u=void 0,f=void 0,d=t[p[0]],v=t[p[1]],y=t[p[2]];if(!1!==r(d,v,y,this._bounds[0],this._bounds[1])){u=v>=o?1:0,f=y>=o?1:0;var g=a[d>=o?1:0][u][f];if(g>0&&g<7){n.set(l,g),h[0]=s[g][0],h[1]=s[g][1];for(var m=0;m<2;++m){var b=((z=h[m])+1)%3;z=p[z],b=p[b];var x=Math.min(z,b),_=Math.max(z,b);if(x in c)c.get(x).get(_).push(l);else{var w=new Map;w.set(_,[l]),c.set(x,w)}}}}}for(;!(n.size<=0);){var C=[],M=[],S=n.keys().next().value,A=n.get(S);if(n.delete(n.keys().next().value),!(A<1||A>6)){p[0]=this.topo_[S].i,p[1]=this.topo_[S].j,p[2]=this.topo_[S].k,h[0]=s[A][0],h[1]=s[A][1];var T=[],I=[];for(m=0;m<2;++m)b=((z=h[m])+1)%3,z=p[z],b=p[b],C.push(z),C.push(b),M.push((o-t[z])/(t[b]-t[z])),x=Math.min(z,b),_=Math.max(z,b),0===m?(T[0]=x,T[1]=_):(I[0]=x,I[1]=_);var P=0,O=0;do{for(var V=S;;){var E=[c.get(I[0]).get(I[1])];if(1===E.length)break;V=E[0]+E[1]-V;var k=n.get(V);if(!(k in n))break;for(A=k.second,n.delete(k),p[0]=this.topo_[V].i,p[1]=this.topo_[V].j,p[2]=this.topo_[V].k,h[0]=s[A][0],h[1]=s[A][1],m=0;m<2;++m){var z;if(b=((z=h[m])+1)%3,z=p[z],b=p[b],x=Math.min(z,b),_=Math.max(z,b),x!==I[0]||_!==I[1]){C.push(z),C.push(b),M.push((o-t[z])/(t[b]-t[z])),I[0]=x,I[1]=_;break}}}if(I[0]===T[0]&&I[1]===T[1]){C.push(C[0]),C.push(C[1]),M.push(M[0]),P=M.length;break}0===O&&(I[0]=T[0],I[1]=T[1],P=M.length),++O}while(O<2);if(P===M.length)e[0].push(C),void 0===e[1]?e[1]=[M]:e[1].push(M);else{for(var j=[],N=[],B=C.length-1;B>=2*P;--B)j.push(C[B]);for(B=M.length-1;B>=P;--B)N.push(1-M[B]);for(B=0;B<2*P;++B)j.push(C[B]);for(B=0;B<P;++B)N.push(M[B]);e[0].push(j),e[1].push(N)}}}return e},t}();function r(t,o,e,i,n){function r(t,o,e){return t>=o&&t<=e}return r(t,i,n)&&r(o,i,n)&&r(e,i,n)}o.MarchingTriangles=n;var s=[[-1,-1],[1,2],[0,1],[2,0],[2,0],[0,1],[1,2],[-1,-1]],a=[[[0,1],[2,3]],[[4,5],[6,7]]]},797:function(t,o,e){var i,n=this&&this.__extends||(i=function(t,o){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)Object.prototype.hasOwnProperty.call(o,e)&&(t[e]=o[e])},i(t,o)},function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function e(){this.constructor=t}i(t,o),t.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}),r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var o,e=1,i=arguments.length;e<i;e++)for(var n in o=arguments[e])Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n]);return t},r.apply(this,arguments)},s=this&&this.__spreadArray||function(t,o,e){if(e||2===arguments.length)for(var i,n=0,r=o.length;n<r;n++)!i&&n in o||(i||(i=Array.prototype.slice.call(o,0,n)),i[n]=o[n]);return t.concat(i||Array.prototype.slice.call(o))};Object.defineProperty(o,"__esModule",{value:!0}),o.ColorScale=void 0;var a=function(t){function o(o){var e=t.call(this,o)||this;return e.options=r({fontSize:11,fontFamily:"Arial, sans-serif",textColor:"#333333",backgroundColor:"rgba(255, 255, 255, 0.95)",borderColor:"#cccccc",borderWidth:1,labelOffset:25,precision:1},o),e.render(),e}return n(o,t),o.prototype.getColorAtValue=function(t){var o=this.options,e=o.min,i=o.max,n=o.colorStops,r=Math.max(0,Math.min(1,(t-e)/(i-e))),a=s([],n,!0).sort(function(t,o){return t.position-o.position});if(r<=a[0].position)return a[0].color;if(r>=a[a.length-1].position)return a[a.length-1].color;for(var h=0;h<a.length-1;h++){var p=a[h],c=a[h+1];if(r>=p.position&&r<=c.position){var l=(r-p.position)/(c.position-p.position);return this.interpolateColor(p.color,c.color,l)}}return a[0].color},o.prototype.updateRange=function(t,o){this.options.min=t,this.options.max=o,this.render()},o.prototype.updateColorStops=function(t){this.options.colorStops=t,this.render()},o.prototype.updateOrientation=function(t){this.options.orientation=t,this.render()},o.prototype.updateAttributeName=function(t){this.options.attributeName=t,this.render()},o.prototype.getOptions=function(){return r({},this.options)},o.prototype.render=function(){this.isVisible&&(t.prototype.render.call(this),this.drawScale(),this.drawLabels())},o.prototype.interpolateColor=function(t,o,e){var i=this.hexToRgb(t),n=this.hexToRgb(o);if(!i||!n)return t;var r=Math.round(i.r+(n.r-i.r)*e),s=Math.round(i.g+(n.g-i.g)*e),a=Math.round(i.b+(n.b-i.b)*e);return"rgb(".concat(r,", ").concat(s,", ").concat(a,")")},o.prototype.hexToRgb=function(t){var o=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return o?{r:parseInt(o[1],16),g:parseInt(o[2],16),b:parseInt(o[3],16)}:null},o.prototype.createGradient=function(){var t,o=this.options,e=o.x,i=o.y,n=o.width,r=o.height,a=o.orientation,h=o.colorStops;t="vertical"===a?this.ctx.createLinearGradient(0,i+r,0,i):this.ctx.createLinearGradient(e,0,e+n,0);for(var p=0,c=s([],h,!0).sort(function(t,o){return t.position-o.position});p<c.length;p++){var l=c[p];t.addColorStop(l.position,l.color)}return t},o.prototype.drawScale=function(){var t=this.options,o=t.x,e=t.y,i=t.width,n=t.height,r=t.backgroundColor,s=t.borderColor,a=t.borderWidth;this.ctx.save(),"transparent"!==r&&(this.ctx.fillStyle=r,this.roundRect(o-1,e-1,i+2,n+2,1),this.ctx.fill());var h=this.createGradient();this.ctx.fillStyle=h,this.roundRect(o,e,i,n,1),this.ctx.fill(),a>0&&(this.ctx.strokeStyle=s,this.ctx.lineWidth=a,this.roundRect(o,e,i,n,1),this.ctx.stroke()),this.drawTickMarks(),this.ctx.restore()},o.prototype.roundRect=function(t,o,e,i,n){this.ctx.beginPath(),this.ctx.moveTo(t+n,o),this.ctx.lineTo(t+e-n,o),this.ctx.quadraticCurveTo(t+e,o,t+e,o+n),this.ctx.lineTo(t+e,o+i-n),this.ctx.quadraticCurveTo(t+e,o+i,t+e-n,o+i),this.ctx.lineTo(t+n,o+i),this.ctx.quadraticCurveTo(t,o+i,t,o+i-n),this.ctx.lineTo(t,o+n),this.ctx.quadraticCurveTo(t,o,t+n,o),this.ctx.closePath()},o.prototype.drawTickMarks=function(){var t=this.options,o=t.x,e=t.y,i=t.width,n=t.height,r=t.orientation,s=t.borderColor;this.ctx.strokeStyle=s,this.ctx.lineWidth=1;for(var a=0;a<=5;a++){var h=a/5;if("vertical"===r){var p=e+n-h*n;this.ctx.beginPath(),this.ctx.moveTo(o+i,p),this.ctx.lineTo(o+i+4,p),this.ctx.stroke()}else{var c=o+h*i;this.ctx.beginPath(),this.ctx.moveTo(c,e+n),this.ctx.lineTo(c,e+n+4),this.ctx.stroke()}}},o.prototype.drawLabels=function(){var t=this.options,o=t.x,e=t.y,i=t.width,n=t.height,r=t.min,s=t.max,a=t.orientation,h=t.fontSize,p=t.fontFamily,c=t.textColor,l=t.labelOffset,u=t.precision,f=t.attributeName;if(this.ctx.save(),this.ctx.fillStyle=c,this.ctx.font="".concat(h,"px ").concat(p),"vertical"===a){this.ctx.save(),this.ctx.translate(o+i+l+2*h,e+n/2),this.ctx.rotate(Math.PI/2),this.ctx.textAlign="center",this.ctx.textBaseline="middle",this.ctx.fillText(f,0,0),this.ctx.restore(),this.ctx.textAlign="left",this.ctx.textBaseline="middle";for(var d=0;d<=5;d++){var v=r+(s-r)*(1-(m=d/5)),y=e+m*n,g=this.formatValue(v,u);this.ctx.fillText(g,o+i+8,y)}}else for(this.ctx.textAlign="center",this.ctx.textBaseline="top",this.ctx.fillText(f,o+i/2,e-l-h),this.ctx.textBaseline="top",d=0;d<=5;d++){v=r+(s-r)*(m=d/5);var m,b=o+m*i;g=this.formatValue(v,u),this.ctx.fillText(g,b,e+n+8)}this.ctx.restore()},o}(e(291).BaseOverlay);o.ColorScale=a},859:function(t,o){var e,i=this&&this.__extends||(e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)Object.prototype.hasOwnProperty.call(o,e)&&(t[e]=o[e])},e(t,o)},function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}),n=this&&this.__assign||function(){return n=Object.assign||function(t){for(var o,e=1,i=arguments.length;e<i;e++)for(var n in o=arguments[e])Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n]);return t},n.apply(this,arguments)};Object.defineProperty(o,"__esModule",{value:!0}),o.Uint32BufferAttribute=o.Uint16BufferAttribute=o.Float32BufferAttribute=o.BufferGeometry=o.BufferAttribute=void 0;var r=function(){function t(t,o,e){void 0===e&&(e=!1),this.array=t,this.itemSize=o,this.count=t.length/o,this.normalized=e,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0,this.needsUpdate=!1}return t.prototype.set=function(t,o){if(o.length!==this.itemSize)throw new Error("Expected ".concat(this.itemSize," values, got ").concat(o.length));if(t<0||t>=this.count)throw new Error("Index ".concat(t," out of range [0, ").concat(this.count-1,"]"));for(var e=t*this.itemSize,i=0;i<this.itemSize;i++)this.array[e+i]=o[i];return this.needsUpdate=!0,this},t.prototype.get=function(t){if(t<0||t>=this.count)throw new Error("Index ".concat(t," out of range [0, ").concat(this.count-1,"]"));for(var o=t*this.itemSize,e=[],i=0;i<this.itemSize;i++)e.push(this.array[o+i]);return e},t.prototype.getX=function(t){if(t<0||t>=this.count)throw new Error("Index ".concat(t," out of range [0, ").concat(this.count-1,"]"));return this.array[t*this.itemSize]},t.prototype.getY=function(t){if(this.itemSize<2)throw new Error("Item size is ".concat(this.itemSize,", cannot get Y component"));return this.array[t*this.itemSize+1]},t.prototype.getZ=function(t){if(this.itemSize<3)throw new Error("Item size is ".concat(this.itemSize,", cannot get Z component"));return this.array[t*this.itemSize+2]},t.prototype.setComponent=function(t,o,e){if(t<0||t>=this.count)throw new Error("Index ".concat(t," out of range [0, ").concat(this.count-1,"]"));if(o<0||o>=this.itemSize)throw new Error("Component ".concat(o," out of range [0, ").concat(this.itemSize-1,"]"));return this.array[t*this.itemSize+o]=e,this.needsUpdate=!0,this},t.prototype.getComponent=function(t,o){if(t<0||t>=this.count)throw new Error("Index ".concat(t," out of range [0, ").concat(this.count-1,"]"));if(o<0||o>=this.itemSize)throw new Error("Component ".concat(o," out of range [0, ").concat(this.itemSize-1,"]"));return this.array[t*this.itemSize+o]},t.prototype.copy=function(t){return this.array=t.array.slice(),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.updateRange=n({},t.updateRange),this.version=t.version,this.needsUpdate=t.needsUpdate,this},t.prototype.copyAt=function(t,o,e){if(this.itemSize!==o.itemSize)throw new Error("ItemSize mismatch: ".concat(this.itemSize," vs ").concat(o.itemSize));var i=o.get(e);return this.set(t,i),this},t.prototype.clone=function(){return new t(new(0,this.array.constructor)(this.array),this.itemSize,this.normalized)},t.prototype.setUsage=function(t){return this.usage=t,this},t.prototype.getByteLength=function(){return this.array.byteLength},t.prototype.forEach=function(t){for(var o=0;o<this.count;o++)t(this.get(o),o);return this},t}();o.BufferAttribute=r;var s=function(){function t(t,o){this.attributes={},this.positions=null,this.indices=null,t&&(this.positions=t),o&&(this.indices=o)}return t.prototype.setPositions=function(t){return this.positions=t,this},t.prototype.getPositions=function(){return this.positions},t.prototype.setIndices=function(t){return this.indices=t,this},t.prototype.getIndices=function(){return this.indices},t.prototype.setAttribute=function(t,o){return this.attributes[t]=o,this},t.prototype.getAttribute=function(t){return this.attributes[t]},t.prototype.computeVertexNormals=function(){if(!this.positions)return console.warn("Cannot compute vertex normals: no position attribute found"),this;var t=this.positions,o=t.count,e=new Float32Array(3*o),i=this.getAttribute("normal");i?(e.fill(0),i.array=e):(i=new a(e,3),this.setAttribute("normal",i));var n=[0,0,0],r=[0,0,0],s=[0,0,0],h=[0,0,0],p=[0,0,0],c=[0,0,0],l=function(t,o,e){e[0]=t[1]*o[2]-t[2]*o[1],e[1]=t[2]*o[0]-t[0]*o[2],e[2]=t[0]*o[1]-t[1]*o[0]},u=function(t,o,e){e[0]=t[0]-o[0],e[1]=t[1]-o[1],e[2]=t[2]-o[2]},f=function(t,o){t[0]+=o[0],t[1]+=o[1],t[2]+=o[2]};if(this.indices)for(var d=this.indices.array,v=d.length/3,y=0;y<v;y++){var g=d[3*y],m=d[3*y+1],b=d[3*y+2];n[0]=t.getComponent(g,0),n[1]=t.getComponent(g,1),n[2]=t.getComponent(g,2),r[0]=t.getComponent(m,0),r[1]=t.getComponent(m,1),r[2]=t.getComponent(m,2),s[0]=t.getComponent(b,0),s[1]=t.getComponent(b,1),s[2]=t.getComponent(b,2),u(r,n,h),u(s,n,p),l(h,p,c);var x=[e[3*g],e[3*g+1],e[3*g+2]],_=[e[3*m],e[3*m+1],e[3*m+2]],w=[e[3*b],e[3*b+1],e[3*b+2]];f(x,c),f(_,c),f(w,c),e[3*g]=x[0],e[3*g+1]=x[1],e[3*g+2]=x[2],e[3*m]=_[0],e[3*m+1]=_[1],e[3*m+2]=_[2],e[3*b]=w[0],e[3*b+1]=w[1],e[3*b+2]=w[2]}else for(v=o/3,y=0;y<v;y++)g=3*y,m=3*y+1,b=3*y+2,n[0]=t.getComponent(g,0),n[1]=t.getComponent(g,1),n[2]=t.getComponent(g,2),r[0]=t.getComponent(m,0),r[1]=t.getComponent(m,1),r[2]=t.getComponent(m,2),s[0]=t.getComponent(b,0),s[1]=t.getComponent(b,1),s[2]=t.getComponent(b,2),u(r,n,h),u(s,n,p),l(h,p,c),e[3*g]=c[0],e[3*g+1]=c[1],e[3*g+2]=c[2],e[3*m]=c[0],e[3*m+1]=c[1],e[3*m+2]=c[2],e[3*b]=c[0],e[3*b+1]=c[1],e[3*b+2]=c[2];for(y=0;y<o;y++){var C=e[3*y],M=e[3*y+1],S=e[3*y+2],A=Math.sqrt(C*C+M*M+S*S);A>0?(e[3*y]=C/A,e[3*y+1]=M/A,e[3*y+2]=S/A):(e[3*y]=0,e[3*y+1]=1,e[3*y+2]=0)}return i.needsUpdate=!0,this},t}();o.BufferGeometry=s;var a=function(t){function o(o,e,i){void 0===i&&(i=!1);var n=o instanceof Float32Array?o:new Float32Array(o);return t.call(this,n,e,i)||this}return i(o,t),o}(r);o.Float32BufferAttribute=a;var h=function(t){function o(o,e,i){void 0===i&&(i=!1);var n=o instanceof Uint16Array?o:new Uint16Array(o);return t.call(this,n,e,i)||this}return i(o,t),o}(r);o.Uint16BufferAttribute=h;var p=function(t){function o(o,e,i){void 0===i&&(i=!1);var n=o instanceof Uint32Array?o:new Uint32Array(o);return t.call(this,n,e,i)||this}return i(o,t),o}(r);o.Uint32BufferAttribute=p},879:(t,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Color=void 0;var e=function(){function t(o){if(o)if(Array.isArray(o)){if(3!==o.length)throw new Error("RGB array must have exactly 3 elements");this.r=o[0],this.g=o[1],this.b=o[2]}else if("string"==typeof o){if(!/^#([0-9A-F]{3}|[0-9A-F]{6})$/i.test(o))throw new Error("Invalid hex color format");this.setHex(o)}else if("number"==typeof o)this.setHex(t.toHexString(o));else if("number"==typeof o)this.setHex(t.toHexString(o));else{if("object"!=typeof o)throw new Error("Invalid color format. Must be an array of 3 numbers, a hex string, or a Color instance. Got ".concat(o));this.r=o.r,this.g=o.g,this.b=o.b}else this.r=0,this.g=0,this.b=0}return t.prototype.lerp=function(o,e){if(e<0||e>1)throw new Error("Interpolation factor t must be between 0 and 1");if(!(o instanceof t))throw new Error("Argument must be an instance of Color");return new t({r:this.r+(o.r-this.r)*e,g:this.g+(o.g-this.g)*e,b:this.b+(o.b-this.b)*e})},t.toHexString=function(t){return"#"+(16777215&t).toString(16).padStart(6,"0").toUpperCase()},t.prototype.toHex=function(){var t=Math.round(255*this.r).toString(16).padStart(2,"0"),o=Math.round(255*this.g).toString(16).padStart(2,"0"),e=Math.round(255*this.b).toString(16).padStart(2,"0");return"#".concat(t).concat(o).concat(e)},t.prototype.setHex=function(t){if(6!==(t=t.replace("#","")).length)throw new Error("Invalid hex color format");return this.r=parseInt(t.substring(0,2),16)/255,this.g=parseInt(t.substring(2,4),16)/255,this.b=parseInt(t.substring(4,6),16)/255,this},t}();o.Color=e},906:function(t,o,e){var i=this&&this.__spreadArray||function(t,o,e){if(e||2===arguments.length)for(var i,n=0,r=o.length;n<r;n++)!i&&n in o||(i||(i=Array.prototype.slice.call(o,0,n)),i[n]=o[n]);return t.concat(i||Array.prototype.slice.call(o))};Object.defineProperty(o,"__esModule",{value:!0}),o.IsoContoursFilled=o.createIsoContoursFilled=void 0;var n=e(879),r=e(97),s=e(185);o.createIsoContoursFilled=function(t,o,e,i){var n=void 0===i?{}:i,r=n.min,s=void 0===r?void 0:r,h=n.max,p=void 0===h?void 0:h,c=n.lut,l=void 0===c?"Rainbow":c,u=n.nbColors;return new a(l,void 0===u?128:u,e).run(t,o,s,p)};var a=function(){function t(t,o,e){this.attr=void 0,this.nodes_=void 0,this.segment_list_=[],this.vmin_=0,this.vmax_=1,this.color_=new n.Color("#000000"),this.lutTable_=(0,r.createLut)("Insar",128),this.position_=[],this.index_=[],this.colors_=[],this.isoValues_=[],this.normals_=[],this.nnormals_=void 0,this.color_=new n.Color("#000000"),this.lutTable_=(0,r.createLut)(t,o),this.lutTable_.setMin(0),this.lutTable_.setMax(1),this.isoValues_=e}return Object.defineProperty(t.prototype,"position",{get:function(){return this.position_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"index",{get:function(){return this.index_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return this.colors_},enumerable:!1,configurable:!0}),t.prototype.run=function(t,o,e,i){void 0===e&&(e=void 0),void 0===i&&(i=void 0),this.attr=o;var n=(0,s.minMax)(this.attr);if(this.vmin_=void 0!==e?e:n[0],this.vmax_=void 0!==i?i:n[1],0===this.isoValues_.length)return{position:[],index:[],color:[],normal:[]};var r=t.getIndices().array;this.nodes_=t.getPositions(),this.nnormals_=t.getAttribute("normal"),void 0===this.nnormals_&&(t.computeVertexNormals(),this.nnormals_=t.getAttribute("normal"));for(var a=0;a<r.length;a+=3)this.classify(r[a],r[a+1],r[a+2]);return{position:this.position_,index:this.index_,color:this.colors_,normal:this.normals_}},t.prototype.normalizeAttr=function(t){return(t-this.vmin_)/(this.vmax_-this.vmin_)},t.prototype.getNode=function(t){return this.nodes_.get(t)},t.prototype.getNormal=function(t){return this.nnormals_.get(t)},t.prototype.getAttr=function(t){return this.attr[t]},t.prototype.classify=function(t,o,e){var i,n,r,s,a,h,c=new p;c.v1=this.getAttr(t),c.p1=this.getNode(t),c.n1=this.getNormal(t),c.v2=this.getAttr(o),c.p2=this.getNode(o),c.n2=this.getNormal(o),c.v3=this.getAttr(e),c.p3=this.getNode(e),c.n3=this.getNormal(e);var l=0,u=0,f=0;if(c.v1<=c.v2&&c.v1<=c.v3)s=c.p1,l=c.v1,i=c.n1,c.v2<=c.v3?(a=c.p2,h=c.p3,u=c.v2,f=c.v3,n=c.n2,r=c.n3):(a=c.p3,h=c.p2,u=c.v3,f=c.v2,n=c.n3,r=c.n2,c.reversed=!0);else if(c.v2<=c.v1&&c.v2<=c.v3)s=c.p2,l=c.v2,i=c.n2,c.v1<=c.v3?(a=c.p1,h=c.p3,u=c.v1,f=c.v3,n=c.n1,r=c.n3,c.reversed=!0):(a=c.p3,h=c.p1,u=c.v3,f=c.v1,n=c.n3,r=c.n1);else{if(!(c.v3<=c.v1&&c.v3<=c.v2))return;s=c.p3,l=c.v3,i=c.n3,c.v1<=c.v2?(a=c.p1,h=c.p2,u=c.v1,f=c.v2,n=c.n1,r=c.n2):(a=c.p2,h=c.p1,u=c.v2,f=c.v1,n=c.n2,r=c.n1,c.reversed=!0)}c.p1=s,c.p2=a,c.p3=h,c.v1=l,c.v2=u,c.v3=f,c.n1=i,c.n2=n,c.n3=r,this.createSegmentList(c),this.createPolygons(c),o=e},t.prototype.createSegmentList=function(t){this.segment_list_=[],t.notIntersectedPolygonValue=this.vmin_;for(var o=0,e=this.isoValues_;o<e.length;o++){var i=e[o];if(i>=t.v3)break;i>t.v1?this.addSegment(i,t):t.notIntersectedPolygonValue=i}},t.prototype.addSegment=function(t,o){var e=new h;e.iso=t;var i=o.v1,n=o.v2,r=o.v3,s=o.p1,a=o.p2,p=o.p3;if(t<o.v2){var c=f(i,n,t),l=f(i,r,t);e.p1=u(s,a,c),e.p2=u(s,p,l),e.n1=u(o.n1,o.n2,c),e.n2=u(o.n1,o.n3,l)}else c=f(n,r,t),l=f(i,r,t),e.p1=u(a,p,c),e.p2=u(s,p,l),e.n1=u(o.n2,o.n3,c),e.n2=u(o.n1,o.n3,l);this.segment_list_.push(e)},t.prototype.createPolygons=function(t){if(!((t.v1<this.vmin_||t.v1>this.vmax_)&&(t.v2<this.vmin_||t.v2>this.vmax_)&&(t.v3<this.vmin_||t.v3>this.vmax_))){var o=function(t){return[-t[0],-t[1],-t[2]]},e=!1;if(t.reversed){if(0===this.segment_list_.length)return void this.addTri(t.p1,t.p3,t.p2,t.n1,t.n3,t.n2,t.notIntersectedPolygonValue);(n=c(this.segment_list_)).iso<t.v2?this.addTri(t.p1,n.p2,n.p1,t.n1,n.n2,n.n1,t.notIntersectedPolygonValue):(e=!0,this.addQuad(t.p1,n.p2,n.p1,t.p2,t.n1,n.n2,n.n1,t.n2,t.notIntersectedPolygonValue));for(var i=1;i<this.segment_list_.length;++i)(r=this.segment_list_[i]).iso<t.v2?this.addQuad(n.p1,r.p1,r.p2,n.p2,o(n.n1),o(r.n1),o(r.n2),o(n.n2),n.iso):e?this.addQuad(n.p1,n.p2,r.p2,r.p1,n.n1,n.n2,r.n2,r.n1,n.iso):(e=!0,this.addPoly(t.p2,n.p1,n.p2,r.p2,r.p1,t.n2,n.n1,n.n2,r.n2,r.n1,n.iso)),n=r;n=l(this.segment_list_),e?this.addTri(n.p1,n.p2,t.p3,n.n1,n.n2,t.n3,n.iso):this.addQuad(t.p2,n.p1,n.p2,t.p3,t.n2,n.n1,n.n2,t.n3,n.iso)}else{if(0===this.segment_list_.length)return void this.addTri(t.p1,t.p2,t.p3,t.n1,t.n2,t.n3,t.notIntersectedPolygonValue);var n;for((n=c(this.segment_list_)).iso<t.v2?this.addTri(t.p1,n.p1,n.p2,t.n1,n.n1,n.n2,t.notIntersectedPolygonValue):(e=!0,this.addQuad(t.p1,t.p2,n.p1,n.p2,t.n1,t.n2,n.n1,n.n2,t.notIntersectedPolygonValue)),i=1;i<this.segment_list_.length;++i){var r;(r=this.segment_list_[i]).iso<t.v2||e?this.addQuad(n.p1,r.p1,r.p2,n.p2,n.n1,r.n1,r.n2,n.n2,n.iso):(e=!0,this.addPoly(t.p2,r.p1,r.p2,n.p2,n.p1,t.n2,r.n1,r.n2,n.n2,n.n1,n.iso)),n=r}n=l(this.segment_list_),e?this.addTri(n.p1,t.p3,n.p2,n.n1,t.n3,n.n2,n.iso):this.addQuad(t.p2,t.p3,n.p2,n.p1,t.n2,t.n3,n.n2,n.n1,n.iso)}}},t.prototype.addTri=function(t,o,e,n,r,a,h){var p,c,l;if(!(h<this.vmin_||h>this.vmax_)){var u=(0,s.fromValueToColor)(this.normalizeAttr(h),{defaultColor:this.color_,lutTable:this.lutTable_}),f=this.position_.length/3;(p=this.position_).push.apply(p,i(i(i([],t,!1),o,!1),e,!1)),this.index_.push(f,f+1,f+2),(c=this.colors_).push.apply(c,i(i(i([],u,!1),u,!1),u,!1)),(l=this.normals_).push.apply(l,i(i(i([],n,!1),r,!1),a,!1))}},t.prototype.addQuad=function(t,o,e,n,r,a,h,p,c){var l,u,f;if(!(c<this.vmin_||c>this.vmax_)){var d=(0,s.fromValueToColor)(this.normalizeAttr(c),{defaultColor:this.color_,lutTable:this.lutTable_}),v=this.position_.length/3;(l=this.position_).push.apply(l,i(i(i(i([],t,!1),o,!1),e,!1),n,!1)),this.index_.push(v,v+1,v+2,v,v+2,v+3),(u=this.colors_).push.apply(u,i(i(i(i([],d,!1),d,!1),d,!1),d,!1)),(f=this.normals_).push.apply(f,i(i(i(i([],r,!1),a,!1),h,!1),p,!1))}},t.prototype.addPoly=function(t,o,e,n,r,a,h,p,c,l,u){var f,d,v;if(!(u<this.vmin_||u>this.vmax_)){var y=(0,s.fromValueToColor)(this.normalizeAttr(u),{defaultColor:this.color_,lutTable:this.lutTable_}),g=this.position_.length/3;(f=this.position_).push.apply(f,i(i(i(i(i([],t,!1),o,!1),e,!1),n,!1),r,!1)),this.index_.push(g,g+1,g+2,g,g+2,g+3,g,g+3,g+4),(d=this.colors_).push.apply(d,i(i(i(i(i([],y,!1),y,!1),y,!1),y,!1),y,!1)),(v=this.normals_).push.apply(v,i(i(i(i(i([],a,!1),h,!1),p,!1),c,!1),l,!1))}},t}();o.IsoContoursFilled=a;var h=function(){this.p1=[0,0,0],this.p2=[0,0,0],this.n1=[0,0,1],this.n2=[0,0,1],this.iso=0},p=function(){this.reversed=!1,this.p1=[0,0,0],this.p2=[0,0,0],this.p3=[0,0,0],this.n1=[1,0,0],this.n2=[1,0,0],this.n3=[1,0,0],this.v1=0,this.v2=0,this.v3=0,this.notIntersectedPolygonValue=0},c=function(t){return t[0]},l=function(t){return t[t.length-1]};function u(t,o,e){var i=1-e;return[e*t[0]+i*o[0],e*t[1]+i*o[1],e*t[2]+i*o[2]]}function f(t,o,e){return 1-Math.abs(e-t)/Math.abs(o-t)}}},o={};return function e(i){var n=o[i];if(void 0!==n)return n.exports;var r=o[i]={exports:{}};return t[i].call(r.exports,r,r.exports,e),r.exports}(156)})());